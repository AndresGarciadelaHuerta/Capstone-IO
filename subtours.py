'''
y _i,j = 1 si existe la ruta
x = carga en cada wea
'''



def identifica(m):
    x = []
    y = []
    variables = []
    sirven = []
    tot = []
    orden = []
    vari = []

    for var in m.getVars():
        if 'x' in var.varName:
            x.append((var.varName, var.x))

    for var in m.getVars():
        if 'y' in var.varName:
            y.append((var.varName, var.x))

    for var in y:
        vari.append(list(var))

    for var in vari:
        var[0] = var[0][2:]
        variables.append(var)

    for i in variables:
        i[0] = i[0].split('_')

    for va in variables:
        if va[1] != 0.0 and va[1] != -0.0:
            sirven.append(va[0])
            tot.append(va[0])



    # si es que esta el nodo en la lista entonces hay subtour

    i = '0'
    orden.append(i)
    par = []
    while len(sirven) != 0:
        for ruta in sirven:
            if ruta[0] == i and ruta[1] == '0':
                par.append(ruta)
                sirven.remove(ruta)
                if len(sirven) != 0:
                    con = arregla(par, sirven, x, y)
                    #print(orden)
                    print('Si tiene')
                    return con
                else:
                    #print(orden)
                    print('No tiene')
                    return False

            if ruta[0] == i:
                par.append(ruta)
                sirven.remove(ruta)
                i = ruta[1]
                orden.append(i)


def arregla(orden, subtour, x, y):

    a = orden[-1][0]
    b = ''
    c = ''
    variables = []
    vari = []
    condiciones = {}

    for var in x:
        vari.append(list(var))

    for var in vari:
        var[0] = var[0][2:]
        variables.append(var)

    for i in variables:
        i[0] = i[0].split('_')

    sirve = []

    for ruta in variables:
        if ruta[0] in subtour:
            sirve.append(ruta)

    for ruta in sirve:
        if ruta[1] == 0.0:
            b = ruta[0][1]
            c = ruta[0][0]

    cb = 'y_{}_{}'.format(c, b)
    a0 = 'y_{}_{}'.format(a, '0')
    ab = 'y_{}_{}'.format(a, b)
    c0 = 'y_{}_{}'.format(c, '0')

    condiciones[cb] = 0.0
    condiciones[a0] = 0.0
    condiciones[ab] = 1.0
    condiciones[c0] = 1.0


    return condiciones













"""

identifica([('x_0_0', -0.0), ('x_0_3', 0.0), ('x_3_0', 0.0), ('x_3_3',
                                                              -0.0), ('x_3_5', -0.0), ('x_3_9', 0.0), ('x_3_11', 0.0), ('x_3_19', 0.0), ('x_3_21', 0.0), ('x_3_22', 0.0), ('x_3_37', 0.0), ('x_3_45', -0.0), ('x_3_52', 0.0), ('x_3_60', 0.0), ('x_3_67', 0.0), ('x_3_83', 1.0), ('x_3_85', 0.0), ('x_3_87', -0.0), ('x_3_88', -0.0), ('x_0_5', 0.0), ('x_5_0', 0.0), ('x_5_3', -0.0), ('x_5_5', -0.0), ('x_5_9', 0.0), ('x_5_11', 0.0), ('x_5_19', 0.0), ('x_5_21', 0.0), ('x_5_22', 0.0), ('x_5_37', 0.0), ('x_5_45', -0.0), ('x_5_52', 0.0), ('x_5_60', -0.0), ('x_5_67', 0.0), ('x_5_83', 0.0), ('x_5_85', 0.0), ('x_5_87', 12.0), ('x_5_88', -0.0), ('x_0_9', 0.0), ('x_9_0', 0.0), ('x_9_3', 0.0), ('x_9_5', 0.0), ('x_9_9', -0.0), ('x_9_11', 0.0), ('x_9_19', -0.0), ('x_9_21', 0.0), ('x_9_22', 0.0), ('x_9_37', 0.0), ('x_9_45', 0.0), ('x_9_52', 0.0), ('x_9_60', 0.0), ('x_9_67', 0.0), ('x_9_83', 0.0), ('x_9_85', 0.0), ('x_9_87', 0.0), ('x_9_88', 0.0), ('x_0_11', 0.0), ('x_11_0', 0.0), ('x_11_3', 0.0), ('x_11_5', 0.0), ('x_11_9', 0.0), ('x_11_11', -0.0), ('x_11_19', 0.0), ('x_11_21', 0.0), ('x_11_22', 0.0), ('x_11_37', 0.0), ('x_11_45', 0.0), ('x_11_52', 0.0), ('x_11_60', 0.0), ('x_11_67', 0.0), ('x_11_83', 0.0), ('x_11_85', 0.0), ('x_11_87', 0.0), ('x_11_88', 0.0), ('x_0_19', 0.0), ('x_19_0', 0.0), ('x_19_3', 0.0), ('x_19_5', 0.0), ('x_19_9', -0.0), ('x_19_11', 0.0), ('x_19_19', -0.0), ('x_19_21', 0.0), ('x_19_22', 0.0), ('x_19_37', 0.0), ('x_19_45', 0.0), ('x_19_52', 0.0), ('x_19_60', 0.0), ('x_19_67', 0.0), ('x_19_83', 0.0), ('x_19_85', 0.0), ('x_19_87', 0.0), ('x_19_88', 0.0), ('x_0_21', 0.0), ('x_21_0', 0.0), ('x_21_3', 0.0), ('x_21_5', 0.0), ('x_21_9', 0.0), ('x_21_11', 0.0), ('x_21_19', 0.0), ('x_21_21', -0.0), ('x_21_22', 0.0), ('x_21_37', 0.0), ('x_21_45', 0.0), ('x_21_52', 0.0), ('x_21_60', 0.0), ('x_21_67', 0.0), ('x_21_83', 0.0), ('x_21_85', 0.0), ('x_21_87', 0.0), ('x_21_88', 0.0), ('x_0_22', 0.0), ('x_22_0', 0.0), ('x_22_3', 0.0), ('x_22_5', 0.0), ('x_22_9', -0.0), ('x_22_11', 0.0), ('x_22_19', -0.0), ('x_22_21', 0.0), ('x_22_22', -0.0), ('x_22_37', -0.0), ('x_22_45', -0.0), ('x_22_52', -0.0), ('x_22_60', 0.0), ('x_22_67', -0.0), ('x_22_83', 0.0), ('x_22_85', -0.0), ('x_22_87', 0.0), ('x_22_88', -0.0), ('x_0_37', 0.0), ('x_37_0', 0.0), ('x_37_3', 0.0), ('x_37_5', 0.0), ('x_37_9', 0.0), ('x_37_11', 0.0), ('x_37_19', 0.0), ('x_37_21', 0.0), ('x_37_22', 3.0), ('x_37_37', -0.0), ('x_37_45', -0.0), ('x_37_52', -0.0), ('x_37_60', 0.0), ('x_37_67', -0.0), ('x_37_83', 0.0), ('x_37_85', -0.0), ('x_37_87', 0.0), ('x_37_88', -0.0), ('x_0_45', 0.0), ('x_45_0', 0.0), ('x_45_3', -0.0), ('x_45_5', -0.0), ('x_45_9', 0.0), ('x_45_11', 0.0), ('x_45_19', 0.0), ('x_45_21', 0.0), ('x_45_22', -0.0), ('x_45_37', -0.0), ('x_45_45', -0.0), ('x_45_52', -0.0), ('x_45_60', -0.0), ('x_45_67', -0.0), ('x_45_83', -0.0), ('x_45_85', -0.0), ('x_45_87', -0.0), ('x_45_88', -0.0), ('x_0_52', 0.0), ('x_52_0', 0.0), ('x_52_3', 0.0), ('x_52_5', 0.0), ('x_52_9', 0.0), ('x_52_11', 0.0), ('x_52_19', 0.0), ('x_52_21', 0.0), ('x_52_22', -0.0), ('x_52_37', -0.0), ('x_52_45', -0.0), ('x_52_52', -0.0), ('x_52_60', -0.0), ('x_52_67', -0.0), ('x_52_83', 0.0), ('x_52_85', 11.0), ('x_52_87', 0.0), ('x_52_88', -0.0), ('x_0_60', 0.0), ('x_60_0', 0.0), ('x_60_3', 0.0), ('x_60_5', 0.0), ('x_60_9', 0.0), ('x_60_11', 0.0), ('x_60_19', 0.0), ('x_60_21', 0.0), ('x_60_22', -0.0), ('x_60_37', 0.0), ('x_60_45', 0.0), ('x_60_52', -0.0), ('x_60_60', -0.0), ('x_60_67', -0.0), ('x_60_83', 0.0), ('x_60_85', -0.0), ('x_60_87', 0.0), ('x_60_88', 4.0), ('x_0_67', 0.0), ('x_67_0', 0.0), ('x_67_3', 0.0), ('x_67_5', 0.0), ('x_67_9', 0.0), ('x_67_11', 0.0), ('x_67_19', 0.0), ('x_67_21', 0.0), ('x_67_22', -0.0), ('x_67_37', -0.0), ('x_67_45', -0.0), ('x_67_52', 7.0), ('x_67_60', -0.0), ('x_67_67', -0.0), ('x_67_83', 0.0), ('x_67_85', -0.0), ('x_67_87', 0.0), ('x_67_88', -0.0), ('x_0_83', 0.0), ('x_83_0', 0.0), ('x_83_3', 0.0), ('x_83_5', 5.0), ('x_83_9', 0.0), ('x_83_11', 0.0), ('x_83_19', 0.0), ('x_83_21', 0.0), ('x_83_22', 0.0), ('x_83_37', 0.0), ('x_83_45', -0.0), ('x_83_52', 0.0), ('x_83_60', 0.0), ('x_83_67', 0.0), ('x_83_83', -0.0), ('x_83_85', 0.0), ('x_83_87', -0.0), ('x_83_88', -0.0), ('x_0_85', 0.0), ('x_85_0', 0.0), ('x_85_3', 0.0), ('x_85_5', 0.0), ('x_85_9', 0.0), ('x_85_11', 0.0), ('x_85_19', 0.0), ('x_85_21', 0.0), ('x_85_22', -0.0), ('x_85_37', 7.0), ('x_85_45', -0.0), ('x_85_52', -0.0), ('x_85_60', -0.0), ('x_85_67', -0.0), ('x_85_83', 0.0), ('x_85_85', -0.0), ('x_85_87', 0.0), ('x_85_88', -0.0), ('x_0_87', 0.0), ('x_87_0', 0.0), ('x_87_3', -0.0), ('x_87_5', -0.0), ('x_87_9', 0.0), ('x_87_11', 0.0), ('x_87_19', 0.0), ('x_87_21', 0.0), ('x_87_22', 0.0), ('x_87_37', 0.0), ('x_87_45', 1.0), ('x_87_52', -0.0), ('x_87_60', -0.0), ('x_87_67', 0.0), ('x_87_83', -0.0), ('x_87_85', 0.0), ('x_87_87', -0.0), ('x_87_88', -0.0), ('x_0_88', 0.0), ('x_88_0', 0.0), ('x_88_3', 0.0), ('x_88_5', 0.0), ('x_88_9', 0.0), ('x_88_11', 0.0), ('x_88_19', 0.0), ('x_88_21', 0.0), ('x_88_22', -0.0), ('x_88_37', -0.0), ('x_88_45', -0.0), ('x_88_52', -0.0), ('x_88_60', -0.0), ('x_88_67', 14.0), ('x_88_83', 0.0), ('x_88_85', -0.0), ('x_88_87', -0.0), ('x_88_88', -0.0)],
[('y_0_0', 0.0), ('y_0_3', -0.0), ('y_3_0', 0.0), ('y_3_3', 0.0), ('y_3_5',
                                                                   0.0), ('y_3_9', 0.0), ('y_3_11', 0.0), ('y_3_19', 0.0), ('y_3_21', 0.0), ('y_3_22', 0.0), ('y_3_37', 0.0), ('y_3_45', -0.0), ('y_3_52', 0.0), ('y_3_60', 0.0), ('y_3_67', 0.0), ('y_3_83', 1.0), ('y_3_85', 0.0), ('y_3_87', -0.0), ('y_3_88', -0.0), ('y_0_5', 0.0), ('y_5_0', -0.0), ('y_5_3', -0.0), ('y_5_5', 0.0), ('y_5_9', 0.0), ('y_5_11', 0.0), ('y_5_19', 0.0), ('y_5_21', 0.0), ('y_5_22', 0.0), ('y_5_37', 0.0), ('y_5_45', -0.0), ('y_5_52', 0.0), ('y_5_60', -0.0), ('y_5_67', 0.0), ('y_5_83', 0.0), ('y_5_85', 0.0), ('y_5_87', 1.0), ('y_5_88', -0.0), ('y_0_9', 0.0), ('y_9_0', 0.0), ('y_9_3', 0.0), ('y_9_5', 0.0), ('y_9_9', 0.0), ('y_9_11', 0.0), ('y_9_19', 0.0), ('y_9_21', 0.0), ('y_9_22', 0.0), ('y_9_37', 0.0), ('y_9_45', 0.0), ('y_9_52', 0.0), ('y_9_60', 0.0), ('y_9_67', 0.0), ('y_9_83', 0.0), ('y_9_85', 0.0), ('y_9_87', 0.0), ('y_9_88', 0.0), ('y_0_11', 0.0), ('y_11_0', 0.0), ('y_11_3', 0.0), ('y_11_5', 0.0), ('y_11_9', 0.0), ('y_11_11', 0.0), ('y_11_19', 0.0), ('y_11_21', 0.0), ('y_11_22', 0.0), ('y_11_37', 0.0), ('y_11_45', 0.0), ('y_11_52', 0.0), ('y_11_60', 0.0), ('y_11_67', 0.0), ('y_11_83', 0.0), ('y_11_85', 0.0), ('y_11_87', 0.0), ('y_11_88', 0.0), ('y_0_19', 0.0), ('y_19_0', 0.0), ('y_19_3', 0.0), ('y_19_5', 0.0), ('y_19_9', 0.0), ('y_19_11', 0.0), ('y_19_19', 0.0), ('y_19_21', 0.0), ('y_19_22', 0.0), ('y_19_37', 0.0), ('y_19_45', 0.0), ('y_19_52', 0.0), ('y_19_60', 0.0), ('y_19_67', 0.0), ('y_19_83', 0.0), ('y_19_85', 0.0), ('y_19_87', 0.0), ('y_19_88', 0.0), ('y_0_21', 0.0), ('y_21_0', 0.0), ('y_21_3', 0.0), ('y_21_5', 0.0), ('y_21_9', 0.0), ('y_21_11', 0.0), ('y_21_19', 0.0), ('y_21_21', 0.0), ('y_21_22', 0.0), ('y_21_37', 0.0), ('y_21_45', 0.0), ('y_21_52', 0.0), ('y_21_60', 0.0), ('y_21_67', 0.0), ('y_21_83', 0.0), ('y_21_85', 0.0), ('y_21_87', 0.0), ('y_21_88', 0.0), ('y_0_22', 0.0), ('y_22_0', 1.0), ('y_22_3', 0.0), ('y_22_5', 0.0), ('y_22_9', 0.0), ('y_22_11', 0.0), ('y_22_19', 0.0), ('y_22_21', 0.0), ('y_22_22', 0.0), ('y_22_37', -0.0), ('y_22_45', -0.0), ('y_22_52', -0.0), ('y_22_60', 0.0), ('y_22_67', -0.0), ('y_22_83', 0.0), ('y_22_85', -0.0), ('y_22_87', 0.0), ('y_22_88', -0.0), ('y_0_37', 0.0), ('y_37_0', -0.0), ('y_37_3', 0.0), ('y_37_5', 0.0), ('y_37_9', 0.0), ('y_37_11', 0.0), ('y_37_19', 0.0), ('y_37_21', 0.0), ('y_37_22', 1.0), ('y_37_37', 0.0), ('y_37_45', -0.0), ('y_37_52', -0.0), ('y_37_60', 0.0), ('y_37_67', -0.0), ('y_37_83', 0.0), ('y_37_85', -0.0), ('y_37_87', 0.0), ('y_37_88', -0.0), ('y_0_45', 0.0), ('y_45_0', -0.0), ('y_45_3', 1.0), ('y_45_5', -0.0), ('y_45_9', 0.0), ('y_45_11', 0.0), ('y_45_19', 0.0), ('y_45_21', 0.0), ('y_45_22', -0.0), ('y_45_37', -0.0), ('y_45_45', 0.0), ('y_45_52', -0.0), ('y_45_60', -0.0), ('y_45_67', -0.0), ('y_45_83', -0.0), ('y_45_85', -0.0), ('y_45_87', -0.0), ('y_45_88', -0.0), ('y_0_52', -0.0), ('y_52_0', -0.0), ('y_52_3', 0.0), ('y_52_5', 0.0), ('y_52_9', 0.0), ('y_52_11', 0.0), ('y_52_19', 0.0), ('y_52_21', 0.0), ('y_52_22', -0.0), ('y_52_37', -0.0), ('y_52_45', -0.0), ('y_52_52', 0.0), ('y_52_60', -0.0), ('y_52_67', -0.0), ('y_52_83', 0.0), ('y_52_85', 1.0), ('y_52_87', 0.0), ('y_52_88', -0.0), ('y_0_60', 1.0), ('y_60_0', 0.0), ('y_60_3', 0.0), ('y_60_5', 0.0), ('y_60_9', 0.0), ('y_60_11', 0.0), ('y_60_19', 0.0), ('y_60_21', 0.0), ('y_60_22', -0.0), ('y_60_37', 0.0), ('y_60_45', 0.0), ('y_60_52', -0.0), ('y_60_60', 0.0), ('y_60_67', -0.0), ('y_60_83', 0.0), ('y_60_85', -0.0), ('y_60_87', 0.0), ('y_60_88', 1.0), ('y_0_67', 0.0), ('y_67_0', -0.0), ('y_67_3', 0.0), ('y_67_5', 0.0), ('y_67_9', 0.0), ('y_67_11', 0.0), ('y_67_19', 0.0), ('y_67_21', 0.0), ('y_67_22', -0.0), ('y_67_37', -0.0), ('y_67_45', -0.0), ('y_67_52', 1.0), ('y_67_60', -0.0), ('y_67_67', 0.0), ('y_67_83', 0.0), ('y_67_85', -0.0), ('y_67_87', 0.0), ('y_67_88', -0.0), ('y_0_83', -0.0), ('y_83_0', -0.0), ('y_83_3', 0.0), ('y_83_5', 1.0), ('y_83_9', 0.0), ('y_83_11', 0.0), ('y_83_19', 0.0), ('y_83_21', 0.0), ('y_83_22', 0.0), ('y_83_37', 0.0), ('y_83_45', -0.0), ('y_83_52', 0.0), ('y_83_60', 0.0), ('y_83_67', 0.0), ('y_83_83', 0.0), ('y_83_85', 0.0), ('y_83_87', -0.0), ('y_83_88', -0.0), ('y_0_85', 0.0), ('y_85_0', -0.0), ('y_85_3', 0.0), ('y_85_5', 0.0), ('y_85_9', 0.0), ('y_85_11', 0.0), ('y_85_19', 0.0), ('y_85_21', 0.0), ('y_85_22', -0.0), ('y_85_37', 1.0), ('y_85_45', -0.0), ('y_85_52', -0.0), ('y_85_60', -0.0), ('y_85_67', -0.0), ('y_85_83', 0.0), ('y_85_85', 0.0), ('y_85_87', 0.0), ('y_85_88', -0.0), ('y_0_87', 0.0), ('y_87_0', -0.0), ('y_87_3', -0.0), ('y_87_5', -0.0), ('y_87_9', 0.0), ('y_87_11', 0.0), ('y_87_19', 0.0), ('y_87_21', 0.0), ('y_87_22', 0.0), ('y_87_37', 0.0), ('y_87_45', 1.0), ('y_87_52', -0.0), ('y_87_60', -0.0), ('y_87_67', 0.0), ('y_87_83', -0.0), ('y_87_85', 0.0), ('y_87_87', 0.0), ('y_87_88', -0.0), ('y_0_88', -0.0), ('y_88_0', 0.0), ('y_88_3', 0.0), ('y_88_5', 0.0), ('y_88_9', 0.0), ('y_88_11', 0.0), ('y_88_19', 0.0), ('y_88_21', 0.0), ('y_88_22', -0.0), ('y_88_37', -0.0), ('y_88_45', -0.0), ('y_88_52', -0.0), ('y_88_60', -0.0), ('y_88_67', 1.0), ('y_88_83', 0.0), ('y_88_85', -0.0), ('y_88_87', -0.0), ('y_88_88', 0.0)])

"""
